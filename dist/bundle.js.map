{"version":3,"file":"bundle.js","sources":["../src/lib/update_indexes.js","../src/lib/eventnames.js","../src/index.js"],"sourcesContent":["export default function updateIndexes(self){\n    const classes = self.className.trim().split(' ');\n    Array.prototype.splice.call(self, 0, self.length);\n    Array.prototype.push.apply(self, classes);\n}\n","const holder = {\n    transitionend: {\n        \"transition\"      : \"transitionend\",\n        \"OTransition\"     : \"oTransitionEnd\",\n        \"MozTransition\"   : \"transitionend\",\n        \"WebkitTransition\": \"webkitTransitionEnd\"\n    },\n    animationstart: {\n        \"animation\"      : \"animationstart\",\n        \"OAnimation\"     : \"oAnimationStart\",\n        \"MozAnimation\"   : \"animationstart\",\n        \"WebkitAnimation\": \"webkitAnimationStart\"\n    },\n    animationiteration: {\n        \"animation\"      : \"animationiteration\",\n        \"OAnimation\"     : \"oAnimationIteration\",\n        \"MozAnimation\"   : \"animationiteration\",\n        \"WebkitAnimation\": \"webkitAnimationIteration\"\n    },\n    animationend: {\n        \"animation\"      : \"animationend\",\n        \"OAnimation\"     : \"oAnimationEnd\",\n        \"MozAnimation\"   : \"animationend\",\n        \"WebkitAnimation\": \"webkitAnimationEnd\"\n    }\n};\n\nfunction prefixName(name, element){\n\n    let fixer = holder[name];\n\n    for(let n in fixer){\n        if(element.style[n] !== undefined){\n            element = null;\n            return fixer[n];\n        }\n    }\n\n    element = null;\n    return name;\n}\n\nconst eventNames = (()=>{\n    let div = document.createElement('div');\n    let result = {\n        animationstart: prefixName('animationstart', div),\n        animationend: prefixName('animationend', div),\n        animationiteration: prefixName('animationiteration', div),\n        transitionend: prefixName('transitionend', div)\n    };\n    div = null;\n    return result;\n})();\n\nexport default { eventNames };\n","import { Emitter } from 'more-events';\nimport events from 'dom-eve';\nimport _classList from 'dom-classlist';\nimport arrayFrom from 'array-from';\nimport getElement from 'dom-get-element';\nimport updateIndexes from './lib/update_indexes.js';\nimport eventNames from './lib/eventnames.js';\n\nclass ClassListEnhanced extends Emitter {\n    constructor(element, context = document){\n        super();\n        this.element = getElement(element, context);\n        this.length = 0;\n        this.classList = _classList(this.element);\n\n        const tracker = events.track();\n        events(element, tracker)\n        .on(eventNames.animationstart, event=>{\n            return this.emit('animationstart', event, this.element);\n        })\n        .on(eventNames.animationend, event=>{\n            return this.emit('animationend', event, this.element);\n        })\n        .on(eventNames.animationiteration, event=>{\n            return this.emit('animationiteration', event, this.element);\n        })\n        .on(eventNames.transitionend, event=>{\n            return this.emit('transitionend', event, this.element);\n        });\n\n        this.destroy = function(){\n            tracker.clear();\n            this.dispose();\n        };\n    }\n    get className(){\n        return this.element.className;\n    }\n    contains(name){\n        return this.classList.contains(name);\n    }\n    add(...names){\n        names.forEach(name=>{\n            this.classList.add(name);\n        });\n        updateIndexes(this);\n        return this.emit('add', names);\n    }\n    remove(...names){\n        names.forEach(name=>{\n            this.classList.remove(name);\n        });\n        updateIndexes(this);\n        return this.emit('remove', names);\n    }\n    toggle(name, test){\n        let result = this.classList.toggle(name, test);\n        updateIndexes(this);\n        return this.emit('toggle', name, result);\n    }\n    item(index){\n        return this.classList.item(index);\n    }\n    forEach(fn, ctx){\n        return arrayFrom(this).forEach(fn, ctx);\n    }\n    map(fn, ctx){\n        return arrayFrom(this).map(fn, ctx);\n    }\n    filter(fn, ctx){\n        return arrayFrom(this).filter(fn, ctx);\n    }\n    reduce(fn, init){\n        return arrayFrom(this).reduce(fn, init);\n    }\n}\n\nif(Symbol && Symbol.iterator){\n    ClassListEnhanced.prototype[Symbol.iterator] = function(){\n        let index = -1, self = this;\n        return {\n            next: function(){\n                if(++index < self.length){\n                    return {done: false, value: self[index]};\n                }else{\n                    return {done: true};\n                }\n            }\n        };\n    };\n}\n\nexport default function classList(element, context){\n    return new ClassListEnhanced(element, context);\n}\n"],"names":["const","let","super","eventNames","this","Emitter"],"mappings":"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"}